<%- include('../includes/header.ejs') %>
    </head>

    <body>
        <%- include('../includes/navigation.ejs') %>
        <main>
            <% if (orders.length <= 0) { %>
            <h1>Nothing there!</h1>
            <% } else { %>

                    <ul>
                        <% orders.forEach(order => {%>
                            <li>
                                <h1># <%= order._id %> -  <a href="/orders/<%= order._id %>">Invoice</a></h1>
                                <ul>
                                    <% order.products.forEach(p => { %>
                                        <li> <%=p.product.title %> (<%=p.quantity%>) </li>
                                    <% }); %> - 
                                   
                                </ul>

                                <h3>
                                    total: <%= order.products.reduce((prevPrice,p) => {
                                        return prevPrice+(p.product.price * p.quantity);
                                    },0)%>
                                </h3>
                            </li>

                        <% }); %>

                    </ul>
                   
            <% } %>
        </main>
        <%- include('../includes/footer.ejs') %>